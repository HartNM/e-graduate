import{f as k,u as I,a as A,c as R,j as s,B as N,r as zs,d as as,e as As,g as z,p as Rs,U as Ts,h as ls,L as cs,i as Ls,O as es,k as ks,l as Bs,m as Es,n as Gs,o as Ms,I as ts,q as $s,s as Ds,b as Os,t as _,C as Z,P as Vs,T as rs,S as Ws,v as Zs}from"./index-B7_hvkM2.js";import{m as Fs}from"./logo-RiP5Cgfk.js";import{M as Us}from"./ModalInform-NNINQB9X.js";import{u as qs}from"./use-form-DDBi_7fX.js";import{S as F}from"./Space-CyCyKMgB.js";import{I as Hs}from"./Image-QhnbGiva.js";import{G as Ks}from"./Group-dxvsYpX2.js";import{B as Js}from"./Button-fInQYk36.js";/* empty css                    */import"./createReactComponent-DJN_V7q0.js";var j={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const is={orientation:"horizontal"},Qs=R((e,{borderWidth:r})=>({group:{"--ai-border-width":zs(r)}})),q=k((e,r)=>{const t=I("ActionIconGroup",is,e),{className:n,style:l,classNames:c,styles:d,unstyled:o,orientation:m,vars:a,borderWidth:u,variant:i,mod:p,attributes:b,...v}=I("ActionIconGroup",is,e),y=A({name:"ActionIconGroup",props:t,classes:j,className:n,style:l,classNames:c,styles:d,unstyled:o,attributes:b,vars:a,varsResolver:Qs,rootSelector:"group"});return s.jsx(N,{...y("group"),ref:r,variant:i,mod:[{"data-orientation":m},p],role:"group",...v})});q.classes=j;q.displayName="@mantine/core/ActionIconGroup";const Xs=R((e,{radius:r,color:t,gradient:n,variant:l,autoContrast:c,size:d})=>{const o=e.variantColorResolver({color:t||e.primaryColor,theme:e,gradient:n,variant:l||"filled",autoContrast:c});return{groupSection:{"--section-height":z(d,"section-height"),"--section-padding-x":z(d,"section-padding-x"),"--section-fz":As(d),"--section-radius":r===void 0?void 0:as(r),"--section-bg":t||l?o.background:void 0,"--section-color":o.color,"--section-bd":t||l?o.border:void 0}}}),H=k((e,r)=>{const t=I("ActionIconGroupSection",null,e),{className:n,style:l,classNames:c,styles:d,unstyled:o,vars:m,variant:a,gradient:u,radius:i,autoContrast:p,attributes:b,...v}=t,y=A({name:"ActionIconGroupSection",props:t,classes:j,className:n,style:l,classNames:c,styles:d,unstyled:o,attributes:b,vars:m,varsResolver:Xs,rootSelector:"groupSection"});return s.jsx(N,{...y("groupSection"),ref:r,variant:a,...v})});H.classes=j;H.displayName="@mantine/core/ActionIconGroupSection";const Ys=R((e,{size:r,radius:t,variant:n,gradient:l,color:c,autoContrast:d})=>{const o=e.variantColorResolver({color:c||e.primaryColor,theme:e,gradient:l,variant:n||"filled",autoContrast:d});return{root:{"--ai-size":z(r,"ai-size"),"--ai-radius":t===void 0?void 0:as(t),"--ai-bg":c||n?o.background:void 0,"--ai-hover":c||n?o.hover:void 0,"--ai-hover-color":c||n?o.hoverColor:void 0,"--ai-color":o.color,"--ai-bd":c||n?o.border:void 0}}}),T=Rs((e,r)=>{const t=I("ActionIcon",null,e),{className:n,unstyled:l,variant:c,classNames:d,styles:o,style:m,loading:a,loaderProps:u,size:i,color:p,radius:b,__staticSelector:v,gradient:y,vars:x,children:f,disabled:g,"data-disabled":S,autoContrast:B,mod:E,attributes:G,...M}=t,P=A({name:["ActionIcon",v],props:t,className:n,style:m,classes:j,classNames:d,styles:o,unstyled:l,attributes:G,vars:x,varsResolver:Ys});return s.jsxs(Ts,{...P("root",{active:!g&&!a&&!S}),...M,unstyled:l,variant:c,size:i,disabled:g||a,ref:r,mod:[{loading:a,disabled:g||S},E],children:[typeof a=="boolean"&&s.jsx(ls,{mounted:a,transition:"slide-down",duration:150,children:L=>s.jsx(N,{component:"span",...P("loader",{style:L}),"aria-hidden":!0,children:s.jsx(cs,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),s.jsx(N,{component:"span",mod:{loading:a},...P("icon"),children:f})]})});T.classes=j;T.displayName="@mantine/core/ActionIcon";T.Group=q;T.GroupSection=H;var ds={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const ns={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:ks("overlay")},so=R((e,{zIndex:r})=>({root:{"--lo-z-index":r?.toString()}})),K=k((e,r)=>{const t=I("LoadingOverlay",ns,e),{classNames:n,className:l,style:c,styles:d,unstyled:o,vars:m,transitionProps:a,loaderProps:u,overlayProps:i,visible:p,zIndex:b,attributes:v,...y}=t,x=Ls(),f=A({name:"LoadingOverlay",classes:ds,props:t,className:l,style:c,classNames:n,styles:d,unstyled:o,attributes:v,vars:m,varsResolver:so}),g={...ns.overlayProps,...i};return s.jsx(ls,{transition:"fade",...a,mounted:!!p,children:S=>s.jsxs(N,{...f("root",{style:S}),ref:r,...y,children:[s.jsx(cs,{...f("loader"),unstyled:o,...u}),s.jsx(es,{...g,...f("overlay"),darkHidden:!0,unstyled:o,color:i?.color||x.white}),s.jsx(es,{...g,...f("overlay"),lightHidden:!0,unstyled:o,color:i?.color||x.colors.dark[5]})]})})});K.classes=ds;K.displayName="@mantine/core/LoadingOverlay";const oo=({reveal:e})=>s.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:s.jsx("path",{d:e?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var U={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const eo={visibilityToggleIcon:oo},to=R((e,{size:r})=>({root:{"--psi-icon-size":z(r,"psi-icon-size"),"--psi-button-size":z(r,"psi-button-size")}})),J=k((e,r)=>{const t=I("PasswordInput",eo,e),{classNames:n,className:l,style:c,styles:d,unstyled:o,vars:m,required:a,error:u,leftSection:i,disabled:p,id:b,variant:v,inputContainer:y,description:x,label:f,size:g,errorProps:S,descriptionProps:B,labelProps:E,withAsterisk:G,inputWrapperOrder:M,wrapperProps:P,radius:L,rightSection:ps,rightSectionWidth:us,rightSectionPointerEvents:ms,leftSectionWidth:vs,visible:gs,defaultVisible:hs,onVisibilityChange:ys,visibilityToggleIcon:fs,visibilityToggleButtonProps:C,rightSectionProps:bs,leftSectionProps:xs,leftSectionPointerEvents:Ss,withErrorStyles:Cs,mod:Is,attributes:$,...js}=t,w=Bs(b),[D,Ps]=Es({value:gs,defaultValue:hs,finalValue:!1,onChange:ys}),O=()=>Ps(!D),V=A({name:"PasswordInput",classes:U,props:t,className:l,style:c,classNames:n,styles:d,unstyled:o,attributes:$,vars:m,varsResolver:to}),{resolvedClassNames:W,resolvedStyles:Q}=Gs({classNames:n,styles:d,props:t}),{styleProps:ws,rest:X}=Ms(js),Y=S?.id||`${w}-error`,ss=B?.id||`${w}-description`,os=`${!!u&&typeof u!="boolean"?Y:""} ${!!x?ss:""}`,_s=os.trim().length>0?os.trim():void 0,Ns=s.jsx(T,{...V("visibilityToggle"),disabled:p,radius:L,"aria-hidden":!C,tabIndex:-1,...C,variant:C?.variant??"subtle",color:"gray",unstyled:o,onTouchEnd:h=>{h.preventDefault(),C?.onTouchEnd?.(h),O()},onMouseDown:h=>{h.preventDefault(),C?.onMouseDown?.(h),O()},onKeyDown:h=>{C?.onKeyDown?.(h),h.key===" "&&(h.preventDefault(),O())},children:s.jsx(fs,{reveal:D})});return s.jsx(ts.Wrapper,{required:a,id:w,label:f,error:u,description:x,size:g,classNames:W,styles:Q,__staticSelector:"PasswordInput",unstyled:o,withAsterisk:G,inputWrapperOrder:M,inputContainer:y,variant:v,labelProps:{...E,htmlFor:w},descriptionProps:{...B,id:ss},errorProps:{...S,id:Y},mod:Is,attributes:$,...V("root"),...ws,...P,children:s.jsx(ts,{component:"div",error:u,leftSection:i,size:g,classNames:{...W,input:$s(U.input,W.input)},styles:Q,radius:L,disabled:p,__staticSelector:"PasswordInput",rightSectionWidth:us,rightSection:ps??Ns,variant:v,unstyled:o,leftSectionWidth:vs,rightSectionPointerEvents:ms||"all",rightSectionProps:bs,leftSectionProps:xs,leftSectionPointerEvents:Ss,withAria:!1,withErrorStyles:Cs,attributes:$,children:s.jsx("input",{required:a,"data-invalid":!!u||void 0,"data-with-left-section":!!i||void 0,...V("innerInput"),disabled:p,id:w,ref:r,...X,"aria-describedby":_s,autoComplete:X.autoComplete||"off",type:D?"text":"password"})})})});J.classes={...Ds.classes,...U};J.displayName="@mantine/core/PasswordInput";const ro="http://localhost:8080",fo=()=>{const e=Os(),[r,t]=_.useState(!1),[n,l]=_.useState(!1),[c,d]=_.useState(""),[o,m]=_.useState(""),a=qs({initialValues:{username:"",password:""},validate:{username:i=>i.trim().length>0?null:"กรอกชื่อผู้ใช้",password:i=>i.trim().length>0?null:"กรอกรหัสผ่าน"}});_.useEffect(()=>{localStorage.removeItem("token")},[]);const u=async()=>{try{t(!0);const i=await fetch(`${ro}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.values)}),p=await i.json();if(!i.ok)throw new Error(p.message);localStorage.setItem("token",p.token),d(p.message),m("success"),setTimeout(()=>{p.role==="student"?e("/student"):e("/personnel")},1e3)}catch(i){console.error("Login error:",i),m("error"),d(i.message)}finally{t(!1),l(!0)}};return s.jsxs(Z,{bg:"#e9ecef",h:"100vh",children:[s.jsx(Us,{opened:n,onClose:()=>l(!1),message:c,type:o}),s.jsxs(Vs,{radius:"md",p:"lg",withBorder:!0,style:{maxWidth:400,minWidth:400},children:[s.jsx(K,{visible:r,zIndex:1e3,overlayProps:{radius:"sm",blur:2}}),s.jsx(F,{h:"xl"}),s.jsx(Z,{children:s.jsx(Hs,{src:Fs,h:200,w:"auto",fit:"contain"})}),s.jsx(F,{h:"xl"}),s.jsxs(Z,{style:{flexDirection:"column"},children:[s.jsx(rs,{size:"lg",fw:500,children:"ระบบสารสนเทศบัณฑิตศึกษา"}),s.jsx(rs,{size:"lg",fw:500,children:"มหาวิทยาลัยราชภัฏกําแพงเพชร"})]}),s.jsx(F,{h:"xl"}),s.jsxs("form",{onSubmit:a.onSubmit(u),children:[s.jsxs(Ws,{children:[s.jsx(Zs,{label:"ชื่อผู้ใช้",placeholder:"ชื่อผู้ใช้ของคุณ",radius:"md",...a.getInputProps("username")}),s.jsx(J,{label:"รหัสผ่าน",placeholder:"รหัสผ่านของคุณ",radius:"md",...a.getInputProps("password")})]}),s.jsx(Ks,{mt:"xl",children:s.jsx(Js,{type:"submit",fullWidth:!0,children:"Login"})})]})]})]})};export{fo as default};
