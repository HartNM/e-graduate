import{j as x}from"./index-B7_hvkM2.js";import{P as F,f as I,s as U,a as w,b as y,d as z,c as H,e as i}from"./PdfUtils-2D7kTCyc.js";import{B as b}from"./Button-fInQYk36.js";const M="http://localhost:8080";async function u(e){const n=await F.create();n.registerFontkit(I);const p=n.addPage([595,842]);await U(n);const _=await fetch("/fonts/THSarabunNew Bold.ttf").then(r=>r.arrayBuffer()),s=await n.embedFont(_),[l,a,v]=w(e?.request_date),[A,J,W]=w(e?.thesis_exam_date),[m,g,$]=y(e?.advisor_approvals_date),[d,j,B]=y(e?.chairpersons_approvals_date),[T,S,q]=y(e?.registrar_approvals_date),[P,k,N]=y(e?.receipt_pay_date),R={ปริญญาโท:{โครงร่าง:2e3,สอบจริง:3e3},ปริญญาเอก:{โครงร่าง:5e3,สอบจริง:7e3}},D={ขอสอบโครงร่างวิทยานิพนธ์:"โครงร่าง",ขอสอบโครงร่างการค้นคว้าอิสระ:"โครงร่าง",ขอสอบวิทยานิพนธ์:"สอบจริง",ขอสอบการค้นคว้าอิสระ:"สอบจริง"}[e?.request_type],L=R[e?.education_level]?.[D]??0,O=localStorage.getItem("token"),C={advisor:"advisor_approvals_id",chairpersons:"chairpersons_approvals_id",registrar:"registrar_approvals_id"};try{for(const[r,h]of Object.entries(C)){const c=e?.[h];if(!c||isNaN(Number(c)))continue;const f=await(await fetch(`${M}/api/personnelInfo`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${O}`},body:JSON.stringify({user_id:c})})).json();f&&(e[h]=f.name)}}catch(r){console.error("Error fetch personnelInfo:",r)}let o=760,t=20;z(p,`คำร้อง${e?.request_type}`,780,s,20),[{text:"มหาวิทยาลัยราชภัฏกำแพงเพชร",x:420,y:o-=t},{text:"วันที่................เดือน...........................พ.ศ...................",x:350,y:o-=t},{text:l,x:380,y:o+2},{text:a,x:440,y:o+2},{text:v,x:510,y:o+2},{text:"เรื่อง",x:60,y:o-=t*2,font:s},{text:e?.request_type,x:100,y:o},{text:"เรียน",x:60,y:o-=t,font:s},{text:"อธิการบดีมหาวิทยาลัยราชภัฏกำแพงเพชร",x:100,y:o},{text:"ข้าพเจ้า................................................................................................รหัสประจำตัวนักศึกษา.................................................",x:100,y:o-=t*2},{text:e?.student_name,x:180,y:o+2},{text:e?.student_id,x:460,y:o+2},{text:"ระดับ...........................................หลักสูตร...............................................................................สาขาวิชา....................................................",x:60,y:o-=t},{text:e?.education_level,x:110,y:o+2},{text:e?.program,x:230,y:o+2},{text:e?.major_name,x:440,y:o+2},{text:"คณะ..........................................................................................มีความประสงค์.........................................................................................",x:60,y:o-=t},{text:e?.faculty_name,x:100,y:o+2},{text:`${e?.request_type}`,x:360,y:o+2},{text:"ในภาคเรียนที่ ....................... ",x:60,y:o-=t},{text:e?.term,x:130,y:o+2},{text:"จึงเรียนมาเพื่อโปรดพิจารณา",x:100,y:o-=t},{text:"ลงชื่อ...........................................................................",x:310,y:o-=t*2},{text:e?.student_name,x:370,y:o+2},{text:"(.........................................................................)",x:330,y:o-=t},{text:e?.student_name,x:370,y:o+2},{text:"นักศึกษา",x:400,y:o-=t},{text:"วันที่................/........................../......................",x:330,y:o-=t},{text:l,x:360,y:o+2},{text:a,x:400,y:o+2},{text:v,x:465,y:o+2},{text:"1. ความเห็นของอาจารย์ที่ปรึกษาวิทยานิพนธ์/การค้นคว้าอิสระ",x:60,y:o-=t*2,font:s,show:typeof e?.advisor_approvals=="boolean"},{text:e?.advisor_approvals?"เห็นควรสอบได้":"ไม่เห็นควร",x:80,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:`เนื่องจาก ${e?.comment}`,x:80,y:o-=t,show:typeof e?.advisor_approvals=="boolean"&&!e.advisor_approvals},{text:"ลงชื่อ.......................................................................",x:75,y:o-=t*2,show:typeof e?.advisor_approvals=="boolean"},{text:e?.advisor_approvals_id,x:140,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:"(.....................................................................) ",x:95,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:e?.advisor_approvals_id,x:140,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:"อาจารย์ที่ปรึกษา",x:145,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:"วันที่ ........../................./...................",x:110,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:m,x:135,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:g,x:170,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:$,x:210,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:"2. ความเห็นประธานกรรมการบัณฑิตศึกษาประจำสาขาวิชา",x:310,y:o+=t*7,font:s,show:typeof e?.chairpersons_approvals=="boolean"},{text:e?.chairpersons_approvals?"เห็นควรสอบได้":"ไม่เห็นควร",x:330,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:`เนื่องจาก ${e?.comment}`,x:330,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"&&!e.chairpersons_approvals},{text:"ลงชื่อ.......................................................................",x:325,y:o-=t*2,show:typeof e?.chairpersons_approvals=="boolean"},{text:e?.chairpersons_approvals_id,x:390,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:"(.....................................................................) ",x:345,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:e?.chairpersons_approvals_id,x:390,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:"ประธานกรรมการบัณฑิตศึกษาประจำสาขาวิชา",x:340,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:"วันที่ ........../................./...................",x:360,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:d,x:385,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:j,x:420,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:B,x:460,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:"3. การตรวจสอบของสำนักส่งเสริมวิชาการและงานทะเบียน",x:60,y:o-=t*1.5,font:s,show:typeof e?.registrar_approvals=="boolean"},{text:e?.registrar_approvals?`มีสภาพการเป็นนักศึกษา ภาคเรียนที่ ${e?.term}`:"ไม่เห็นควร",x:80,y:o-=t,show:typeof e?.registrar_approvals=="boolean"},{text:e?.registrar_approvals?"ลงทะเบียนเรียนครบตามหลักสูตร":`เนื่องจาก ${e?.comment}`,x:80,y:o-=t,show:typeof e?.registrar_approvals=="boolean"},{text:"ให้ชำระค่าธรรมเนียมที่ฝ่ายการเงิน",x:60,y:o-=t,show:typeof e?.registrar_approvals=="boolean"&&e?.registrar_approvals},{text:"ลงชื่อ.......................................................................",x:75,y:o-=t,show:typeof e?.registrar_approvals=="boolean"},{text:e?.registrar_approvals_id,x:140,y:o+2,show:typeof e?.registrar_approvals=="boolean"},{text:"(.....................................................................) ",x:95,y:o-=t,show:typeof e?.registrar_approvals=="boolean"},{text:e?.registrar_approvals_id,x:140,y:o+2,show:typeof e?.registrar_approvals=="boolean"},{text:"นายทะเบียน",x:150,y:o-=t,show:typeof e?.registrar_approvals=="boolean"},{text:"วันที่ ........../................./...................",x:110,y:o-=t,show:typeof e?.registrar_approvals=="boolean"},{text:T,x:135,y:o+2,show:typeof e?.registrar_approvals=="boolean"},{text:S,x:170,y:o+2,show:typeof e?.registrar_approvals=="boolean"},{text:q,x:210,y:o+2,show:typeof e?.registrar_approvals=="boolean"},{text:`4. ชำระค่าธรรมเนียมการสอบแล้ว ภาคเรียนที่ ${e?.term}`,x:310,y:o+=t*7,font:s,show:e?.receipt_vol!==null},{text:`จำนวน ${L.toLocaleString()} บาท `,x:330,y:o-=t,show:e?.receipt_vol!==null},{text:`ตามใบเสร็จรับเงิน เล่มที่ ${e?.receipt_vol} เลขที่ ${e?.receipt_vol}`,x:310,y:o-=t,show:e?.receipt_vol!==null},{text:"ลงชื่อ.......................................................................",x:325,y:o-=t*2,show:e?.receipt_vol!==null},{text:"นายณัฐวุฒิ มาตกาง",x:390,y:o+2,show:e?.receipt_vol!==null},{text:"(.....................................................................) ",x:345,y:o-=t,show:e?.receipt_vol!==null},{text:"นายณัฐวุฒิ มาตกาง",x:390,y:o+2,show:e?.receipt_vol!==null},{text:"เจ้าหน้าที่การเงิน",x:395,y:o-=t,show:e?.receipt_vol!==null},{text:"วันที่ ........../................./...................",x:360,y:o-=t,show:e?.receipt_vol!==null},{text:P,x:385,y:o+2,show:e?.receipt_vol!==null},{text:k,x:420,y:o+2,show:e?.receipt_vol!==null},{text:N,x:460,y:o+2,show:e?.receipt_vol!==null}].filter(r=>r.show!==!1).forEach(r=>H(p,r.text,r.x,r.y,r.font,r.size)),typeof e?.advisor_approvals=="boolean"&&i(p,50,o+t*8,250,t*8.5),typeof e?.chairpersons_approvals=="boolean"&&i(p,300,o+t*8,250,t*8.5),typeof e?.registrar_approvals=="boolean"&&i(p,50,o-t*.5,250,t*8.5),e?.receipt_vol!==null&&i(p,300,o-t*.5,250,t*8.5);const E=await n.save();return new Blob([E],{type:"application/pdf"})}function Z({data:e,showType:n}){const p=async()=>{const s=await u(e),l=URL.createObjectURL(s);window.open(l,"_blank")},_=async()=>{const s=await u(e),l=URL.createObjectURL(s),a=document.createElement("iframe");a.style.display="none",a.src=l,document.body.appendChild(a),a.onload=()=>{a.contentWindow.print()}};return x.jsx(x.Fragment,{children:n==="view"?x.jsx(b,{size:"xs",color:"gray",onClick:p,children:"ข้อมูล"}):x.jsx(b,{size:"xs",color:"blue",onClick:_,children:"พิมพ์"})})}export{Z as P};
