import{t as o,j as e,A as a,B as O,M as k,v as z,D as F,T as $,E as V}from"./index-B7_hvkM2.js";import{M as q}from"./ModalInform-NNINQB9X.js";import{u as D}from"./use-form-DDBi_7fX.js";import{G as P}from"./Group-dxvsYpX2.js";import{B as f}from"./Button-fInQYk36.js";import{S as u}from"./Space-CyCyKMgB.js";import{F as G}from"./Flex-CXnzITNo.js";/* empty css                    */import"./createReactComponent-DJN_V7q0.js";const h="http://localhost:8080",Y=()=>{const[c,m]=o.useState({open:!1,type:"",message:""}),d=(s,r)=>m({open:!0,type:s,message:r}),S=()=>m(s=>({...s,open:!1})),[T,i]=o.useState(!1),[n,p]=o.useState(!1),[y,g]=o.useState(!1),x=localStorage.getItem("token"),[v,A]=o.useState([]),[j,w]=o.useState([]),b=[{value:"2000000000001",label:"นายธนกร ศรีสุวรรณ"},{value:"2000000000002",label:"นายปิยะพงษ์ ชาญชัย"},{value:"2000000000003",label:"นางสาวศศิธร บุญเรือง"},{value:"2000000000004",label:"นายอนันต์ รุ่งเรืองสกุล"},{value:"2000000000005",label:"นายกิตติพงษ์ ศรีสวัสดิ์"},{value:"2000000000006",label:"นางสุชาดา แก้วมณี"},{value:"2000000000007",label:"นายธนกฤต พูนสุข"}],l=D({initialValues:{user_id:"",name:"",major_id:"",password:"123456"},validate:{name:s=>s.trim().length>0?null:"กรุณากรอกชื่อ"}});o.useEffect(()=>{(async()=>{try{console.log("candidate :",b);const r=await fetch(`${h}/api/allAssignRegistrarOfficer`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`}}),t=await r.json();if(!r.ok)throw new Error(t.message);A(t),console.log("RegistrarOfficer :",t);const R=b.filter(I=>!t.some(M=>M.user_id===I.value));w(R),console.log("candidate_filtered :",R)}catch(r){d("error",r.message),console.error("Error fetch allAssignRegistrarOfficer:",r)}g(!1)})()},[y]);const E=()=>{l.reset(),p("add"),i(!0)},_=s=>{l.setValues(s),p("delete"),i(!0)},B=async()=>{const s={add:`${h}/api/addAssignRegistrarOfficer`,delete:`${h}/api/deleteAssignRegistrarOfficer`};try{const r=await fetch(s[n],{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x}`},body:JSON.stringify({...l.values})}),t=await r.json();if(!r.ok)throw new Error(t.message);d("success",t.message),g(!0),i(!1)}catch(r){d("error",r.message),console.error("Error fetch AssignRegistrarOfficer:",r)}},C=v.map(s=>e.jsxs(a.Tr,{children:[e.jsx(a.Td,{children:s.name}),e.jsx(a.Td,{children:e.jsx(P,{children:e.jsx(f,{color:"red",size:"xs",onClick:()=>_(s),children:"ลบ"})})})]},s.user_id));return e.jsxs(O,{children:[e.jsx(q,{opened:c.open,onClose:S,message:c.message,type:c.type}),e.jsx(k,{opened:T,onClose:()=>i(!1),title:"กรอกข้อมูลประธานกรรมการบัณฑิตศึกษาประจำสาขาวิชา",centered:!0,children:e.jsxs("form",{onSubmit:l.onSubmit(B),children:[n==="delete"?e.jsx(z,{label:"ชื่อ",...l.getInputProps("name"),disabled:!0}):e.jsx(F,{label:"ชื่อ",searchable:!0,data:j,value:l.values.RegistrarOfficer_id,onChange:s=>{l.setFieldValue("user_id",s);const r=j.find(t=>t.value===s);l.setFieldValue("name",r?r.label:"")}}),e.jsx(u,{h:"md"}),e.jsx(f,{color:n==="delete"?"red":"green",type:"submit",fullWidth:!0,children:n==="delete"?"ลบ":"บันทึก"})]})}),e.jsx($,{size:"1.5rem",fw:900,mb:"md",children:"AssignRegistrarOfficer"}),e.jsx(u,{h:"xl"}),e.jsx(O,{children:e.jsx(G,{justify:"flex-end",children:e.jsx(f,{variant:"filled",size:"xs",onClick:()=>E(),children:"เพิ่มข้อมูล"})})}),e.jsx(u,{h:"xl"}),e.jsx(V,{type:"scroll",offsetScrollbars:!0,style:{borderRadius:"8px",border:"1px solid #e0e0e0"},children:e.jsxs(a,{horizontalSpacing:"sm",verticalSpacing:"sm",highlightOnHover:!0,children:[e.jsx(a.Thead,{children:e.jsxs(a.Tr,{children:[e.jsx(a.Th,{children:"ชื่อ"}),e.jsx(a.Th,{children:"การดำเนินการ"})]})}),e.jsx(a.Tbody,{children:C})]})})]})};export{Y as default};
