import{j as s,M as P,v as y}from"./index-B7_hvkM2.js";import{T as D}from"./Textarea-Dei6KChT.js";import{D as I}from"./DatePickerInput-DIAi7llo.js";import{S as T}from"./Space-CyCyKMgB.js";import{F as B}from"./Flex-CXnzITNo.js";import{B as _}from"./Button-fInQYk36.js";import{P as k,f as q,s as F,g as M,a as R,b as h,d as S,c as C,e as v}from"./PdfUtils-2D7kTCyc.js";const N=({opened:e,onClose:p,title:n,form:r,handleAdd:a})=>s.jsx(P,{opened:e,onClose:p,title:n,centered:!0,children:s.jsxs("form",{onSubmit:r.onSubmit(a),children:[s.jsx(y,{label:"ชื่อ-นามสกุล",disabled:!0,...r.getInputProps("student_name")}),s.jsx(y,{label:"รหัสประจำตัว",disabled:!0,...r.getInputProps("student_id")}),s.jsx(y,{label:"ระดับการศึกษา",disabled:!0,...r.getInputProps("education_level")}),s.jsx(y,{label:"หลักสูตร",disabled:!0,...r.getInputProps("program")}),s.jsx(y,{label:"สาขาวิชา",disabled:!0,...r.getInputProps("major_name")}),s.jsx(y,{label:"คณะ",disabled:!0,...r.getInputProps("faculty_name")}),s.jsx(D,{label:"เนื่องจาก",minRows:2,...r.getInputProps("reason")}),s.jsx(I,{label:"เลือกวันที่สอบใหม่",placeholder:"เลื่อกวัน",firstDayOfWeek:0,valueFormat:"DD MMMM YYYY",minDate:r.values.thesis_exam_date,withAsterisk:!0,...r.getInputProps("thesis_exam_date")}),s.jsx(T,{h:"lg"}),s.jsx(B,{justify:"flex-end",children:s.jsx(_,{type:"submit",color:"green",children:"บันทึก"})})]})});async function u(e){const p=await k.create();p.registerFontkit(q);const n=p.addPage([595,842]);await F(p);const r=await fetch("/fonts/THSarabunNew Bold.ttf").then(l=>l.arrayBuffer()),a=await p.embedFont(r);M(n);const[i,x,c]=R(e?.request_date),[f,b,d]=h(e?.advisor_approvals_date),[w,m,j]=h(e?.chairpersons_approvals_date);let o=760,t=20;S(n,`คำร้อง${e.request_type}`,780,a,20),[{text:"มหาวิทยาลัยราชภัฏกำแพงเพชร",x:420,y:o-=t},{text:"วันที่................เดือน...........................พ.ศ...................",x:350,y:o-=t},{text:i,x:380,y:o+2},{text:x,x:440,y:o+2},{text:c,x:510,y:o+2},{text:"เรื่อง",x:60,y:o-=t*2,font:a},{text:e.request_type,x:100,y:o},{text:"เรียน",x:60,y:o-=t,font:a},{text:`ประธานคณะกรรมการบัณฑิตศึกษาประจำสาขาวิชา${e?.major_name}`,x:100,y:o},{text:"ข้าพเจ้า................................................................................................รหัสประจำตัวนักศึกษา.................................................",x:100,y:o-=t*2},{text:e?.student_name,x:180,y:o+2},{text:e?.student_id,x:460,y:o+2},{text:"ระดับ...........................................หลักสูตร...............................................................................สาขาวิชา....................................................",x:60,y:o-=t},{text:e?.education_level,x:110,y:o+2},{text:e?.program,x:230,y:o+2},{text:e?.major_name,x:440,y:o+2},{text:"คณะ..........................................................................................มีความประสงค์.........................................................................................",x:60,y:o-=t},{text:e?.faculty_name,x:100,y:o+2},{text:e.request_type,x:360,y:o+2},{text:"เนื่่องจาก.....................................................................................................................................................................................................",x:60,y:o-=t},{text:e?.reason,x:140,y:o+2},{text:"จึงเรียนมาเพื่อโปรดพิจารณา",x:100,y:o-=t},{text:"ลงชื่อ...........................................................................",x:310,y:o-=t*2},{text:e?.student_name,x:370,y:o+2},{text:"(.........................................................................)",x:330,y:o-=t},{text:e?.student_name,x:370,y:o+2},{text:"นักศึกษา",x:400,y:o-=t},{text:"วันที่................/........................../......................",x:330,y:o-=t},{text:i,x:360,y:o+2},{text:x,x:400,y:o+2},{text:c,x:465,y:o+2},{text:"1. ความเห็นของอาจารย์ที่ปรึกษาหมู่เรียน",x:60,y:o-=t*2,font:a,show:typeof e?.advisor_approvals=="boolean"},{text:e?.advisor_approvals?"เห็นควรอนุญาต":"ไม่อนุญาต",x:80,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:`เนื่องจาก ${e?.comment}`,x:80,y:o-=t,show:typeof e?.advisor_approvals=="boolean"&&!e.advisor_approvals},{text:"ลงชื่อ.......................................................................",x:75,y:o-=t*2,show:typeof e?.advisor_approvals=="boolean"},{text:e?.advisor_approvals_id,x:140,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:"(.....................................................................) ",x:95,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:e?.advisor_approvals_id,x:140,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:"อาจารย์ที่ปรึกษา",x:145,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:"วันที่ ........../................./...................",x:110,y:o-=t,show:typeof e?.advisor_approvals=="boolean"},{text:f,x:135,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:b,x:170,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:d,x:210,y:o+2,show:typeof e?.advisor_approvals=="boolean"},{text:"2. ความเห็นประธานกรรมการบัณฑิตศึกษาประจำสาขาวิชา",x:310,y:o+=t*7,font:a,show:typeof e?.chairpersons_approvals=="boolean"},{text:e?.chairpersons_approvals?"เห็นควรอนุญาต":"ไม่อนุญาต",x:330,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:`เนื่องจาก ${e?.comment}`,x:330,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"&&!e.chairpersons_approvals},{text:"ลงชื่อ.......................................................................",x:325,y:o-=t*2,show:typeof e?.chairpersons_approvals=="boolean"},{text:e?.chairpersons_approvals_id,x:390,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:"(.....................................................................) ",x:345,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:e?.chairpersons_approvals_id,x:390,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:"ประธานกรรมการบัณฑิตศึกษาประจำสาขาวิชา",x:340,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:"วันที่ ........../................./...................",x:360,y:o-=t,show:typeof e?.chairpersons_approvals=="boolean"},{text:w,x:385,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:m,x:420,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"},{text:j,x:460,y:o+2,show:typeof e?.chairpersons_approvals=="boolean"}].filter(l=>l.show!==!1).forEach(l=>C(n,l.text,l.x,l.y,l.font,l.size)),typeof e?.advisor_approvals=="boolean"&&v(n,50,o-10,250,t*8.5),typeof e?.chairpersons_approvals=="boolean"&&v(n,300,o-10,250,t*8.5);const g=await p.save();return new Blob([g],{type:"application/pdf"})}function A({data:e,showType:p}){const n=async()=>{const a=await u(e),i=URL.createObjectURL(a);window.open(i,"_blank")},r=async()=>{const a=await u(e),i=URL.createObjectURL(a),x=document.createElement("iframe");x.style.display="none",x.src=i,document.body.appendChild(x),x.onload=()=>{x.contentWindow.print()}};return s.jsx(s.Fragment,{children:p==="view"?s.jsx(_,{size:"xs",color:"gray",onClick:n,children:"ข้อมูล"}):s.jsx(_,{size:"xs",color:"blue",onClick:r,children:"พิมพ์"})})}export{N as M,A as P};
